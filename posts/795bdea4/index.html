<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2 | 东方月初</title><meta name="keywords" content="Serv00,图床,好看的"><meta name="author" content="东方月初"><meta name="copyright" content="东方月初"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2"><meta name="application-name" content="Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2"><meta property="og:url" content="https://blog.damizai.cn/posts/795bdea4/index.html"><meta property="og:site_name" content="东方月初"><meta property="og:description" content="Serv00上搭建一个PixPro图床,内存太小,我们可以接入到CFR2 足够个人使用。自己有VPS的也可在宝塔上面部署 面板页 后台页 友情提示 使用Serv00搭建的好像不支持PNG格式上传 上传后会显示空白不显示图片 Serv00图床 PNG上传空白 解决办法  复制以下代码 替换到 conf"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://serv.200038.xyz/2024/09/19/052317.webp"><meta property="article:author" content="东方月初"><meta property="article:tag" content="在晨光中奔跑,在暮色中微笑,生活的每一刻,都值得用心拥抱"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://serv.200038.xyz/2024/09/19/052317.webp"><meta name="description" content="Serv00上搭建一个PixPro图床,内存太小,我们可以接入到CFR2 足够个人使用。自己有VPS的也可在宝塔上面部署 面板页 后台页 友情提示 使用Serv00搭建的好像不支持PNG格式上传 上传后会显示空白不显示图片 Serv00图床 PNG上传空白 解决办法  复制以下代码 替换到 conf"><link rel="shortcut icon" href="https://serv.200038.xyz/2024/09/25/081149.webp"><link rel="canonical" href="https://blog.damizai.cn/posts/795bdea4/"><link rel="preconnect" href="//cdn.cbd.int"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"Jinx","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"👀跑哪里去了~","backTitle":"🐖抓到你啦～'"},
  LA51: {"enable":true,"ck":"3JSq0Qo07GmVu5Hs","LingQueMonitorID":null},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://weilai.us.kg',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"5562ffc3f323451caba498c934616545","mailMd5":""},
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":5},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 在晨光中奔跑","🔍 在暮色中微笑","🏠 生活的每一刻","🔨 都值得用心拥抱","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"本篇文章距离创建时间已过","messageNext":"天,不保证内容可用性."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 东方月初","link":"链接: ","source":"来源: 东方月初","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '东方月初',
  title: 'Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2',
  postAI: '本文介绍如何在Serv00上搭建一个PixPro图床，接入到 Cloudflare R2, 自己有VPS的也可在宝塔上面部署，可用于博客，存储照片。',
  pageFillDescription: 'Serv00上搭建一个PixPro图床内存太小我们可以接入到CFR2 足够个人使用。自己有VPS的也可在宝塔上面部署, 面板页, 后台页, Serv00图床 PNG上传空白 解决办法  复制以下代码 替换到 config/image_processing.php, 也可下载   截图软件试试, 安装前准备, 安装步骤, 和上一步一样, 接入R2 前提 已开通 Cloudflare R2, 进入到 Cloudflare 面板 找到 R2 右边有一个管理 R2API 令牌点击创建 API令牌 创建好后里面有我们需要的访问密钥和机密访问密钥, 1. 进入到 Cloudflare 面板 找到 R2 点击创建存储桶, 2. 进入后名称随便写。位置选择亚太地区后点击创建存储桶, 3. 创建好后点击设置拉到下面看到 R2.dev 子域点击后面的允许访问  连接域需要添加你托管到CF上面域名, 4. 14 步我们安装选择S3后看到下图, 5. 点击完成安装即可。这是我们上传好的图片 我下面的域名就是我们 R2 分配的域名, 6. 我们回到 Cloudflare R2 就会看到刚刚上传的图片, 感谢作者欢迎大家去预览、哈哈哈上搭建一个图床内存太小我们可以接入到足够个人使用自己有的也可在宝塔上面部署面板页后台页友情提示使用搭建的好像不支持格式上传上传后会显示空白不显示图片图床上传空白解决办法复制以下代码替换到将图片转换为格式使用将图片转换为格式检查是否包含透明通道设置背景颜色为透明转换失败使用将图片转换为格式转换失败处理图片压缩也可下载截图软件试试安装前准备账号注册项目地址安装步骤注册好账号打开网页进入到面板端添加域名或者用自己的域名都行这里我用别的网站注册的二级域名如下图添加把里面的记录解析你托管到的域名或者别的地方申请的按照下图打开域名的权限点击等待成功创建数据库保存账号及地址下载文件上传安装包并解压进入文件管理器进入文件夹删除其下所有文件上传安装包到你添加的域名或者自带域名下选择你们下载文件的路径上传好如下图和上一步一样进去后如下图所以我们建一直按着然后点击鼠标左键全选移动到我们开始创建域名目录下的修改版本在域名目录下创建一个文本名为添加版本选择添加以下代码访问你的域名开始安装系统管理员账户和密码自己设置如果要接入我们存储选择下面我会写安装方式点击回到首页就可以上传图片了接入前提已开通进入到面板找到右边有一个管理令牌点击创建令牌创建好后里面有我们需要的访问密钥和机密访问密钥进入到面板找到点击创建存储桶进入后名称随便写位置选择亚太地区后点击创建存储桶创建好后点击设置拉到下面看到子域点击后面的允许访问连接域需要添加你托管到上面域名步我们安装选择后看到下图参数值你的存储桶名称你的后面不要加你的存储桶名称令牌访问密钥令牌机密访问密钥自定义域名添加的自定义域或分配的域名点击完成安装即可这是我们上传好的图片我下面的域名就是我们分配的域名我们回到就会看到刚刚上传的图片在给大家推荐一个的在线生成封面网站专为博客短视频社交媒体等生成个性化封面项目地址这个封面可以和图床结合封面做好后我们不用去上传到图床直接点击封面网站的外链即可前提已部署图床感谢作者梦爱吃鱼欢迎大家去预览哈哈哈',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-06 23:15:48',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/static/dongfang/jinx.css" media="defer" onload="this.media='all'"><script src="/static/jinx.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/niceao/niceao-cdn@main/hexo/css/anzhiyu.css"><script async="" defer="" src="https://um.200038.xyz/script.js" data-website-id="d4662f99-6e33-4665-9ae0-db72eda07b0b"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="东方月初" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div id="loading-box"></div><div class="cat__scene"><div class="cat__main"><div class="cat__body"></div><div class="cat__body"></div><div class="cat__tail"></div><div class="cat__head"></div></div></div></div><script>const preloader = {
  endLoading: () => {
    var loadingBox = document.getElementById('loading-box');
    var loadingBoxme = document.getElementById('loading-box-me');
    loadingBoxme.addEventListener('animationend', () => {setTimeout(function() {loadingBox.classList.add("loaded");}, 2000) })
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  },
  otherendLoading: () => {
    document.getElementById('loading-box').classList.add("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.otherendLoading();},5000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.otherendLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">东方月初</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/statistics/"><i class="fa-solid fa-chart-line faa-tada"></i><span> 文章统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://suoni.nyc.mn/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链状态检测</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/websites/"><i class="anzhiyufont anzhiyu-icon-fire faa-tada" style="font-size: 0.9em;"></i><span> 网站收藏</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://200038.xyz"><i class="anzhiyufont anzhiyu-icon-anzhiyu faa-tada" style="font-size: 0.9em;"></i><span> 个人主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="anzhiyufont anzhiyu-icon-bolt faa-tada" style="font-size: 0.9em;"></i><span> 本站日志</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://serv.200038.xyz/2024/10/30/531638.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://serv.200038.xyz/2024/10/30/531638.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://serv.200038.xyz/2024/10/30/185281.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://serv.200038.xyz/2024/10/30/185281.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Cloudflare-R2/" style="font-size: 1.05rem;">Cloudflare R2<sup>1</sup></a><a href="/tags/Cloudflare-Tunnels/" style="font-size: 1.05rem;">Cloudflare Tunnels<sup>1</sup></a><a href="/tags/Cloudflare-pages/" style="font-size: 1.05rem;">Cloudflare pages<sup>7</sup></a><a href="/tags/D1-R2/" style="font-size: 1.05rem;">D1 + R2<sup>1</sup></a><a href="/tags/Fastly-CDN/" style="font-size: 1.05rem;">Fastly CDN<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/GitHub/" style="font-size: 1.05rem;">GitHub<sup>1</sup></a><a href="/tags/Github/" style="font-size: 1.05rem;">Github<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>8</sup></a><a href="/tags/LOL/" style="font-size: 1.05rem;">LOL<sup>1</sup></a><a href="/tags/Markdown/" style="font-size: 1.05rem;">Markdown<sup>1</sup></a><a href="/tags/Noge-js/" style="font-size: 1.05rem;">Noge.js<sup>1</sup></a><a href="/tags/PicGo-WebP-Cloud/" style="font-size: 1.05rem;">PicGo+WebP Cloud<sup>1</sup></a><a href="/tags/R2/" style="font-size: 1.05rem;">R2<sup>1</sup></a><a href="/tags/Rin/" style="font-size: 1.05rem;">Rin<sup>1</sup></a><a href="/tags/Serv00/" style="font-size: 1.05rem;">Serv00<sup>7</sup></a><a href="/tags/TCPping/" style="font-size: 1.05rem;">TCPping<sup>1</sup></a><a href="/tags/Tag-Plugins/" style="font-size: 1.05rem;">Tag Plugins<sup>2</sup></a><a href="/tags/VPSX-UI/" style="font-size: 1.05rem;">VPSX-UI<sup>1</sup></a><a href="/tags/VPSping/" style="font-size: 1.05rem;">VPSping<sup>1</sup></a><a href="/tags/VPS%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C/" style="font-size: 1.05rem;">VPS命令操作<sup>1</sup></a><a href="/tags/VPS%E5%B7%A5%E5%85%B7%E7%AE%B1/" style="font-size: 1.05rem;">VPS工具箱<sup>1</sup></a><a href="/tags/VPS%E8%84%9A%E6%9C%AC/" style="font-size: 1.05rem;">VPS脚本<sup>2</sup></a><a href="/tags/Vercel/" style="font-size: 1.05rem;">Vercel<sup>1</sup></a><a href="/tags/npm%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">npm命令<sup>1</sup></a><a href="/tags/nyc-mn/" style="font-size: 1.05rem;">nyc.mn<sup>1</sup></a><a href="/tags/wrok/" style="font-size: 1.05rem;">wrok<sup>1</sup></a><a href="/tags/%E4%B8%80%E9%94%AE%E5%93%AA%E5%90%92/" style="font-size: 1.05rem;">一键哪吒<sup>1</sup></a><a href="/tags/%E4%B8%8D%E5%A4%AA%E5%85%A8/" style="font-size: 1.05rem;">不太全<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem;">个人博客<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.05rem;">博客<sup>1</sup></a><a href="/tags/%E5%9B%BE%E5%BA%8A/" style="font-size: 1.05rem;">图床<sup>2</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%94%9F%E6%88%90%E5%99%A8/" style="font-size: 1.05rem;">地址生成器<sup>1</sup></a><a href="/tags/%E5%A5%BD%E7%9C%8B%E7%9A%84/" style="font-size: 1.05rem;">好看的<sup>1</sup></a><a href="/tags/%E5%BD%B1%E8%A7%86%E7%AB%99%E6%90%AD%E5%BB%BA/" style="font-size: 1.05rem;">影视站搭建<sup>1</sup></a><a href="/tags/%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%93%AA%E5%90%92%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">最简单的哪吒教程<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E7%9B%91%E6%8E%A7/" style="font-size: 1.05rem;">网站监控<sup>1</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5/" style="font-size: 1.05rem;">网页<sup>1</sup></a><a href="/tags/%E8%B5%B7%E5%A7%8B%E9%A1%B5/" style="font-size: 1.05rem;">起始页<sup>1</sup></a><a href="/tags/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/" style="font-size: 1.05rem;">静态网站<sup>1</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E4%B8%AD/" itemprop="url">学习中</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Serv00/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Serv00</span></a><a class="article-meta__tags" href="/tags/%E5%9B%BE%E5%BA%8A/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>图床</span></a><a class="article-meta__tags" href="/tags/%E5%A5%BD%E7%9C%8B%E7%9A%84/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>好看的</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-09-10T04:00:57.000Z" title="发表于 2024-09-10 12:00:57">2024-09-10</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-11-06T15:15:48.000Z" title="更新于 2024-11-06 23:15:48">2024-11-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">1.3k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>5分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为深圳"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>深圳</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://serv.200038.xyz/2024/09/19/052317.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">Jinx GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax="" src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope="" itemtype="https://blog.damizai.cn/posts/795bdea4/"><header><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E4%B8%AD/" itemprop="url">学习中</a><a href="/tags/Serv00/" tabindex="-1" itemprop="url">Serv00</a><a href="/tags/%E5%9B%BE%E5%BA%8A/" tabindex="-1" itemprop="url">图床</a><a href="/tags/%E5%A5%BD%E7%9C%8B%E7%9A%84/" tabindex="-1" itemprop="url">好看的</a><h1 id="CrawlerTitle" itemprop="name headline">Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2</h1><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">东方月初</span><time itemprop="dateCreated datePublished" datetime="2024-09-10T04:00:57.000Z" title="发表于 2024-09-10 12:00:57">2024-09-10</time><time itemprop="dateCreated datePublished" datetime="2024-11-06T15:15:48.000Z" title="更新于 2024-11-06 23:15:48">2024-11-06</time></header><h2 id="Serv00上搭建一个PixPro图床-内存太小-我们可以接入到CFR2-足够个人使用。自己有VPS的也可在宝塔上面部署"><a href="#Serv00上搭建一个PixPro图床-内存太小-我们可以接入到CFR2-足够个人使用。自己有VPS的也可在宝塔上面部署" class="headerlink" title="Serv00上搭建一个PixPro图床,内存太小,我们可以接入到CFR2 足够个人使用。自己有VPS的也可在宝塔上面部署"></a>Serv00上搭建一个PixPro图床,内存太小,我们可以接入到CFR2 足够个人使用。自己有VPS的也可在宝塔上面部署</h2><hr>
<h3 id="面板页"><a href="#面板页" class="headerlink" title="面板页"></a>面板页</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/a7851a9a4cb48ce3008bdf5b6835f6f2b2446aba.jpg" alt="png"></p>
<h3 id="后台页"><a href="#后台页" class="headerlink" title="后台页"></a>后台页</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/81b3a97608fce33725b887f5888863903a6b70de.jpg" alt="png"></p>
<p><strong>友情提示 使用Serv00搭建的好像不支持PNG格式上传 上传后会显示空白不显示图片</strong></p>
<h3 id="Serv00图床-PNG上传空白-解决办法-复制以下代码-替换到-config-image-processing-php"><a href="#Serv00图床-PNG上传空白-解决办法-复制以下代码-替换到-config-image-processing-php" class="headerlink" title="Serv00图床 PNG上传空白 解决办法  复制以下代码 替换到 config/image_processing.php"></a>Serv00图床 <code>PNG上传空白</code> 解决办法  复制以下代码 替换到 <code>config/image_processing.php</code></h3><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将JPEG图片转换为WebP格式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertToWebp</span>(<span class="params"><span class="variable">$source</span>, <span class="variable">$destination</span>, <span class="variable">$quality</span> = <span class="number">60</span></span>) </span>{</span><br><span class="line">    <span class="variable">$info</span> = <span class="title function_ invoke__">getimagesize</span>(<span class="variable">$source</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$info</span>[<span class="string">'mime'</span>] == <span class="string">'image/jpeg'</span>) {</span><br><span class="line">        <span class="variable">$image</span> = <span class="title function_ invoke__">imagecreatefromjpeg</span>(<span class="variable">$source</span>);</span><br><span class="line">    } <span class="keyword">elseif</span> (<span class="variable">$info</span>[<span class="string">'mime'</span>] == <span class="string">'image/gif'</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$width</span> = <span class="title function_ invoke__">imagesx</span>(<span class="variable">$image</span>);</span><br><span class="line">    <span class="variable">$height</span> = <span class="title function_ invoke__">imagesy</span>(<span class="variable">$image</span>);</span><br><span class="line">    <span class="variable">$maxWidth</span> = <span class="number">2500</span>;</span><br><span class="line">    <span class="variable">$maxHeight</span> = <span class="number">1600</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$width</span> &gt; <span class="variable">$maxWidth</span> || <span class="variable">$height</span> &gt; <span class="variable">$maxHeight</span>) {</span><br><span class="line">        <span class="variable">$ratio</span> = <span class="title function_ invoke__">min</span>(<span class="variable">$maxWidth</span> / <span class="variable">$width</span>, <span class="variable">$maxHeight</span> / <span class="variable">$height</span>);</span><br><span class="line">        <span class="variable">$newWidth</span> = <span class="title function_ invoke__">round</span>(<span class="variable">$width</span> * <span class="variable">$ratio</span>);</span><br><span class="line">        <span class="variable">$newHeight</span> = <span class="title function_ invoke__">round</span>(<span class="variable">$height</span> * <span class="variable">$ratio</span>);</span><br><span class="line">        <span class="variable">$newImage</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="variable">$newWidth</span>, <span class="variable">$newHeight</span>);</span><br><span class="line">        <span class="title function_ invoke__">imagecopyresampled</span>(<span class="variable">$newImage</span>, <span class="variable">$image</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable">$newWidth</span>, <span class="variable">$newHeight</span>, <span class="variable">$width</span>, <span class="variable">$height</span>);</span><br><span class="line">        <span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$image</span>);</span><br><span class="line">        <span class="variable">$image</span> = <span class="variable">$newImage</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">imagewebp</span>(<span class="variable">$image</span>, <span class="variable">$destination</span>, <span class="variable">$quality</span>);</span><br><span class="line">    <span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$image</span>);</span><br><span class="line">    <span class="title function_ invoke__">gc_collect_cycles</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Imagick将PNG图片转换为WebP格式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertPngWithImagick</span>(<span class="params"><span class="variable">$source</span>, <span class="variable">$destination</span>, <span class="variable">$quality</span> = <span class="number">60</span></span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="variable">$image</span> = <span class="keyword">new</span> <span class="title class_">Imagick</span>(<span class="variable">$source</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查是否包含透明通道</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$image</span>-&gt;<span class="title function_ invoke__">getImageAlphaChannel</span>()) {</span><br><span class="line">            <span class="comment">// 设置背景颜色为透明</span></span><br><span class="line">            <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">setImageBackgroundColor</span>(<span class="keyword">new</span> <span class="title class_">ImagickPixel</span>(<span class="string">'transparent'</span>));</span><br><span class="line">            <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">setImageAlphaChannel</span>(<span class="title class_">Imagick</span>::<span class="variable constant_">ALPHACHANNEL_ACTIVATE</span>);</span><br><span class="line">            <span class="variable">$image</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">mergeImageLayers</span>(<span class="title class_">Imagick</span>::<span class="variable constant_">LAYERMETHOD_FLATTEN</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">setImageFormat</span>(<span class="string">'webp'</span>);</span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">setImageCompressionQuality</span>(<span class="variable">$quality</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$width</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">getImageWidth</span>();</span><br><span class="line">        <span class="variable">$height</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">getImageHeight</span>();</span><br><span class="line">        <span class="variable">$maxWidth</span> = <span class="number">2500</span>;</span><br><span class="line">        <span class="variable">$maxHeight</span> = <span class="number">1600</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$width</span> &gt; <span class="variable">$maxWidth</span> || <span class="variable">$height</span> &gt; <span class="variable">$maxHeight</span>) {</span><br><span class="line">            <span class="variable">$ratio</span> = <span class="title function_ invoke__">min</span>(<span class="variable">$maxWidth</span> / <span class="variable">$width</span>, <span class="variable">$maxHeight</span> / <span class="variable">$height</span>);</span><br><span class="line">            <span class="variable">$newWidth</span> = <span class="title function_ invoke__">round</span>(<span class="variable">$width</span> * <span class="variable">$ratio</span>);</span><br><span class="line">            <span class="variable">$newHeight</span> = <span class="title function_ invoke__">round</span>(<span class="variable">$height</span> * <span class="variable">$ratio</span>);</span><br><span class="line">            <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">resizeImage</span>(<span class="variable">$newWidth</span>, <span class="variable">$newHeight</span>, <span class="title class_">Imagick</span>::<span class="variable constant_">FILTER_LANCZOS</span>, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="variable">$result</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">writeImage</span>(<span class="variable">$destination</span>);</span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">clear</span>();</span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">destroy</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">    } <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) {</span><br><span class="line">        <span class="title function_ invoke__">logMessage</span>(<span class="string">'Imagick转换PNG失败: '</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Imagick将GIF图片转换为WebP格式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertGifToWebp</span>(<span class="params"><span class="variable">$source</span>, <span class="variable">$destination</span>, <span class="variable">$quality</span> = <span class="number">60</span></span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="variable">$image</span> = <span class="keyword">new</span> <span class="title class_">Imagick</span>();</span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">readImage</span>(<span class="variable">$source</span>);</span><br><span class="line">        <span class="variable">$image</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">coalesceImages</span>();</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$image</span> <span class="keyword">as</span> <span class="variable">$frame</span>) {</span><br><span class="line">            <span class="variable">$frame</span>-&gt;<span class="title function_ invoke__">setImageFormat</span>(<span class="string">'webp'</span>);</span><br><span class="line">            <span class="variable">$frame</span>-&gt;<span class="title function_ invoke__">setImageCompressionQuality</span>(<span class="variable">$quality</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="variable">$image</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">optimizeImageLayers</span>();</span><br><span class="line">        <span class="variable">$result</span> = <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">writeImages</span>(<span class="variable">$destination</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">clear</span>();</span><br><span class="line">        <span class="variable">$image</span>-&gt;<span class="title function_ invoke__">destroy</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">    } <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) {</span><br><span class="line">        <span class="title function_ invoke__">logMessage</span>(<span class="string">'GIF转换WebP失败: '</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理图片压缩</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processImageCompression</span>(<span class="params"><span class="variable">$fileMimeType</span>, <span class="variable">$newFilePath</span>, <span class="variable">$newFilePathWithoutExt</span>, <span class="variable">$quality</span></span>) </span>{</span><br><span class="line">    <span class="variable">$convertSuccess</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable">$finalFilePath</span> = <span class="variable">$newFilePath</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$fileMimeType</span> === <span class="string">'image/png'</span>) {</span><br><span class="line">        <span class="variable">$convertSuccess</span> = <span class="title function_ invoke__">convertPngWithImagick</span>(<span class="variable">$newFilePath</span>, <span class="variable">$newFilePathWithoutExt</span> . <span class="string">'.webp'</span>, <span class="variable">$quality</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$convertSuccess</span>) {</span><br><span class="line">            <span class="variable">$finalFilePath</span> = <span class="variable">$newFilePathWithoutExt</span> . <span class="string">'.webp'</span>;</span><br><span class="line">            <span class="title function_ invoke__">unlink</span>(<span class="variable">$newFilePath</span>);</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">elseif</span> (<span class="variable">$fileMimeType</span> === <span class="string">'image/gif'</span>) {</span><br><span class="line">        <span class="variable">$convertSuccess</span> = <span class="title function_ invoke__">convertGifToWebp</span>(<span class="variable">$newFilePath</span>, <span class="variable">$newFilePathWithoutExt</span> . <span class="string">'.webp'</span>, <span class="variable">$quality</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$convertSuccess</span>) {</span><br><span class="line">            <span class="variable">$finalFilePath</span> = <span class="variable">$newFilePathWithoutExt</span> . <span class="string">'.webp'</span>;</span><br><span class="line">            <span class="title function_ invoke__">unlink</span>(<span class="variable">$newFilePath</span>);</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">elseif</span> (<span class="variable">$fileMimeType</span> !== <span class="string">'image/webp'</span> &amp;&amp; <span class="variable">$fileMimeType</span> !== <span class="string">'image/svg+xml'</span>) {</span><br><span class="line">        <span class="variable">$convertSuccess</span> = <span class="title function_ invoke__">convertToWebp</span>(<span class="variable">$newFilePath</span>, <span class="variable">$newFilePathWithoutExt</span> . <span class="string">'.webp'</span>, <span class="variable">$quality</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$convertSuccess</span>) {</span><br><span class="line">            <span class="variable">$finalFilePath</span> = <span class="variable">$newFilePathWithoutExt</span> . <span class="string">'.webp'</span>;</span><br><span class="line">            <span class="title function_ invoke__">unlink</span>(<span class="variable">$newFilePath</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [<span class="variable">$convertSuccess</span>, <span class="variable">$finalFilePath</span>];</span><br><span class="line">}</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="也可下载-PixPin-截图软件试试"><a href="#也可下载-PixPin-截图软件试试" class="headerlink" title="也可下载 PixPin  截图软件试试"></a>也可下载 <a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?wocao=aHR0cHM6Ly9waXhwaW5hcHAuY29tLw==">PixPin</a>  截图软件试试</h3><h3 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h3><p><strong><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?wocao=aHR0cHM6Ly93d3cuc2VydjAwLmNvbS8=">Serv00账号注册</a></strong></p>
<blockquote>
<p><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?wocao=aHR0cHM6Ly9naXRodWIuY29tL0pMaW5Nci9QaXhQcm8v">Github,PixPro项目地址</a></p>
</blockquote>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><ol>
<li><p>注册好Serv00账号打开网页进入到面板端添加域名或者用自己的域名都行，这里我用别的网站注册的二级域名。如下图添加<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/65b5e8853269dc1517f0c29312f405ec4ff93aac.jpg" alt="img"></p>
</li>
<li><p>把里面的A记录解析你托管到CF的域名或者别的地方申请的<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/89fad1033d1bc063cc48549c59ccc86f90fc45b7.jpg" alt="img"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/42cb9cc5ef879bd3ff44afae6058f2b589f3ad04.jpg" alt="png"></p>
</li>
<li><p>按照下图打开域名的权限<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/65f930477953843e868fa55a5b9303716e659ed3.jpg" alt="png"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/6bead65cbca8e9bf5284e0bd0809cbccd524fbd6.jpg" alt="png"><br>点击Save等待成功</p>
</li>
<li><p>创建MySQL数据库（保存账号及地址）<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/495fafb3a994859395fceac7d6af587ecae551a9.jpg" alt="png"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/6e54144c39f77ee9fdfa22683ebcd946f136993e.jpg" alt="png"></p>
</li>
<li><div class="btns rounded grid5">
            <a class="button no-text-decoration" target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?wocao=aHR0cHM6Ly9naXRodWIuY29tL0pMaW5Nci9QaXhQcm8vcmVsZWFzZXMvdGFnL3YxLjcuNg==" title="下载ZIP文件"><i class="anzhiyufont anzhiyu-icon-github"></i>下载ZIP文件</a>
          </div>
</li>
<li><p>上传安装包并解压进入文件管理器<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://i.111666.best/image/lwU3tB1yOBMU3BGgCgbYEP.png" alt="image"></p>
</li>
<li><p>进入public_html文件夹删除其下所有文件<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://i.111666.best/image/rW0Dia44iDyGLjkFJf65zT.png" alt="image"></p>
</li>
<li><p>上传安装包到你添加的域名或者Serv00自带域名下<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/b7301c6bb01e09fa8212834c3e6af4b68ac3bab7.jpg" alt="undefined"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/0a35e541298e16d5b424e37711df220196fcb608.jpg" alt="undefined"></p>
</li>
<li><p>选择你们下载文件的路径上传好如下图<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/475b0cc5380aa5c6a098a587c96d960f2bea8bb6.jpg" alt="undefined"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/7bbf3b21347003fd80c632298441fad9fdecb043.jpg" alt="undefined"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/d8ab33579a8b00b259be673f18c53cfcd373bb71.jpg" alt="undefined"></p>
</li>
</ol>
<h3 id="和上一步一样"><a href="#和上一步一样" class="headerlink" title="和上一步一样"></a>和上一步一样</h3><ol start="10">
<li><p>进去后如下图所以我们<code>Shift</code>建一直按着然后点击鼠标左键全选<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/fffb74f2162d5d0bc0c382ceea298fb9c0fcc8eb.jpg" alt="undefined"></p>
</li>
<li><p>移动到我们开始创建域名目录下的<code>public_html</code><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/048b5580f71361a883e023b5016b137ac4ab5bdd.jpg" alt="png"></p>
</li>
<li><p>修改PHP版本 在域名目录下创建一个文本，名为：<code>.htaccess</code><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/fa3c6470d9afea1785903b6c93046186052fb2e8.jpg" alt="png"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/167e762e94fa1e2ddd4bd29064e573a59934a377.jpg" alt="png"></p>
</li>
<li><p>添加PHP版本<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/b6f389d7bbf07970ae10d26445b1ec5017906da9.jpg" alt="E.png"></p>
</li>
</ol>
<p><strong>选择<code>Text Editor</code> 添加以下代码</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType application/x-httpd-php81 .php</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/8846fa57b96c746e82c98c3cff83192c333978e0.jpg" alt="png"></p>
<ol start="14">
<li><p>访问你的域名开始安装系统，管理员账户和密码自己设置 ，如果要接入<code>CFR2</code>我们存储选择 <code>S3</code> 下面我会写<code>S3</code>安装方式<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/88ae10370b1c2c2a1e9c2980228371982944f72b.jpg" alt="png"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/a3bf9c47a9b8cd6590165729e0c3c79f1169ac9b.jpg" alt="png"><br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/41eba336ae11799d9f93b9e2ea430626be4a8705.jpg" alt="png"></p>
</li>
<li><p>点击回到首页就可以上传图片了<br><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/1b0c08bb32bc384db6982aac4ed6f58ac464fd92.jpg" alt="png"></p>
</li>
</ol>
<hr>
<h3 id="接入R2-前提-已开通-Cloudflare-R2"><a href="#接入R2-前提-已开通-Cloudflare-R2" class="headerlink" title="接入R2 前提 已开通 Cloudflare R2"></a>接入R2 前提 已开通 Cloudflare R2</h3><h3 id="进入到-Cloudflare-面板-找到-R2-右边有一个管理-R2API-令牌点击创建-API令牌-，创建好后里面有我们需要的访问密钥和机密访问密钥"><a href="#进入到-Cloudflare-面板-找到-R2-右边有一个管理-R2API-令牌点击创建-API令牌-，创建好后里面有我们需要的访问密钥和机密访问密钥" class="headerlink" title="进入到 Cloudflare 面板 找到 R2 右边有一个管理 R2API 令牌点击创建 API令牌 ，创建好后里面有我们需要的访问密钥和机密访问密钥"></a>进入到 Cloudflare 面板 找到 R2 右边有一个管理 R2API 令牌点击创建 API令牌 ，创建好后里面有我们需要的访问密钥和机密访问密钥</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/127c616330870251adb6897b04d0ca0e8ba830b0.jpg" alt="3K"></p>
<h3 id="1-进入到-Cloudflare-面板-找到-R2-点击创建存储桶"><a href="#1-进入到-Cloudflare-面板-找到-R2-点击创建存储桶" class="headerlink" title="1. 进入到 Cloudflare 面板 找到 R2 点击创建存储桶"></a>1. 进入到 Cloudflare 面板 找到 R2 点击创建存储桶</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/eee36ef2f9e5086de6d3dbb93e8b28ff4fe26577.jpg" alt="1"></p>
<h3 id="2-进入后名称随便写。位置选择亚太地区后点击创建存储桶"><a href="#2-进入后名称随便写。位置选择亚太地区后点击创建存储桶" class="headerlink" title="2. 进入后名称随便写。位置选择亚太地区后点击创建存储桶"></a>2. 进入后名称随便写。位置选择亚太地区后点击创建存储桶</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/2de4727294de8dde45ea7c6b773cbc1628d70abe.jpg" alt="2"></p>
<h3 id="3-创建好后点击设置拉到下面看到-R2-dev-子域点击后面的允许访问-，-连接域需要添加你托管到CF上面域名"><a href="#3-创建好后点击设置拉到下面看到-R2-dev-子域点击后面的允许访问-，-连接域需要添加你托管到CF上面域名" class="headerlink" title="3. 创建好后点击设置拉到下面看到 R2.dev 子域点击后面的允许访问 ， 连接域需要添加你托管到CF上面域名"></a>3. 创建好后点击设置拉到下面看到 R2.dev 子域点击后面的允许访问 ， 连接域需要添加你托管到CF上面域名</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/99e549d954615e6279ee8295e75d63e920075cf8.jpg" alt="3"></p>
<h3 id="4-14-步我们安装选择S3后看到下图"><a href="#4-14-步我们安装选择S3后看到下图" class="headerlink" title="4. 14 步我们安装选择S3后看到下图"></a>4. 14 步我们安装选择<code>S3</code>后看到下图</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/89d9aa12a4d7de30f6ce84acd5d395b920d3e4e0.jpg" alt="4"></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>S3 Region</td>
<td>auto</td>
</tr>
<tr>
<td>S3 Bucket</td>
<td>你的存储桶名称</td>
</tr>
<tr>
<td>S3 Endpoint</td>
<td>你的S3API 后面不要加你的存储桶名称</td>
</tr>
<tr>
<td>S3 Access Key ID</td>
<td>R2API令牌访问密钥</td>
</tr>
<tr>
<td>S3 Access Key Secret</td>
<td>R2API令牌机密访问密钥</td>
</tr>
<tr>
<td>S3 自定义域名</td>
<td>R2.dev 添加的自定义域 或 R2 分配的域名</td>
</tr>
</tbody></table>
<h3 id="5-点击完成安装即可。这是我们上传好的图片-我下面的域名就是我们-R2-分配的域名"><a href="#5-点击完成安装即可。这是我们上传好的图片-我下面的域名就是我们-R2-分配的域名" class="headerlink" title="5. 点击完成安装即可。这是我们上传好的图片 我下面的域名就是我们 R2 分配的域名"></a>5. 点击完成安装即可。这是我们上传好的图片 我下面的域名就是我们 R2 分配的域名</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/debdfa2a267ad44bde508936288285b528bd781b.jpg" alt="5"></p>
<h3 id="6-我们回到-Cloudflare-R2-就会看到刚刚上传的图片"><a href="#6-我们回到-Cloudflare-R2-就会看到刚刚上传的图片" class="headerlink" title="6. 我们回到 Cloudflare R2 就会看到刚刚上传的图片"></a>6. 我们回到 Cloudflare R2 就会看到刚刚上传的图片</h3><p><img src="https://cdn.jsdelivr.net/gh/niceao/img/2024/10/27/378607.gif" onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp&quot;" data-lazy-src="https://assets.vviptuangou.com/8f23c10386b3907fc6a5e03a026af498e6fd9767.jpg" alt="6"></p>
<blockquote>
<p>在给大家推荐一个的在线生成封面网站，专为博客、短视频、社交媒体等生成个性化封面.<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?wocao=aHR0cHM6Ly9naXRodWIuY29tL0pMaW5Nci9NaW5pLUNvdmVy">GitHub,项目地址</a>.这个封面可以和图床结合。 封面做好后我们不用去上传到图床直接点击封面网站的外链即可,前提已部署<code>PixPro</code> 图床</p>
</blockquote>
<h3 id="感谢作者梦爱吃鱼，欢迎大家去预览、哈哈哈"><a href="#感谢作者梦爱吃鱼，欢迎大家去预览、哈哈哈" class="headerlink" title="感谢作者梦爱吃鱼，欢迎大家去预览、哈哈哈"></a>感谢作者<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?wocao=aHR0cHM6Ly9ibG9nLmJzZ3VuLmNuLw==">梦爱吃鱼</a>，欢迎大家去预览、哈哈哈</h3></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/about/" title="头像"><img class="post-copyright__author_img_back" src="/img/chuibaoni.gif" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="/img/chuibaoni.gif" title="头像" alt="头像"></a><div class="post-copyright__author_name">东方月初</div><div class="post-copyright__author_desc">涂山红红</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.damizai.cn/posts/795bdea4/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.damizai.cn/posts/795bdea4/')">Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://serv.200038.xyz/2024/10/30/531638.webp" target="_blank"><img class="post-qr-code-img" src="https://serv.200038.xyz/2024/10/30/531638.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://serv.200038.xyz/2024/10/30/185281.webp" target="_blank"><img class="post-qr-code-img" src="https://serv.200038.xyz/2024/10/30/185281.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.damizai.cn/posts/795bdea4/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Serv00上搭建一个 PixPro 若梦图床 + 接入Cloudflare R2&amp;url=https://blog.damizai.cn/posts/795bdea4/&amp;pic=https://serv.200038.xyz/2024/09/19/052317.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.damizai.cn" target="_blank">东方月初</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Serv00/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Serv00<span class="tagsPageCount">7</span></a><a class="post-meta__box__tags" href="/tags/%E5%9B%BE%E5%BA%8A/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>图床<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/%E5%A5%BD%E7%9C%8B%E7%9A%84/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>好看的<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://serv.200038.xyz/2024/10/29/089211.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/806cefdd/"><img class="prev-cover" src="https://serv.200038.xyz/2024/09/19/817686.webp" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Rin 是一个基于 Cloudflare Pages + Workers + D1 + R2 的博客，只需要一个解析到CF的域名即可部署</div></div></a></div><div class="next-post pull-right"><a href="/posts/dbd99469/"><img class="next-cover" src="https://serv.200038.xyz/2024/09/18/201877.webp" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">大家都申请了nyc.mn 这个域名吧,看说明需要一个活动状态，下来教大家部署一个简单的网页,起始页</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/688a2073/" title="使用带有PHP的主机 + Cloudflare + Worker 搭建一个Umami API"><img class="cover" src="https://serv.200038.xyz/2024/10/29/089211.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-10-30</div><div class="title">使用带有PHP的主机 + Cloudflare + Worker 搭建一个Umami API</div></div></a></div><div><a href="/posts/89d112a2/" title="Serv00搭建Alist个人网盘"><img class="cover" src="https://serv.200038.xyz/2024/09/19/857815.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-09-22</div><div class="title">Serv00搭建Alist个人网盘</div></div></a></div><div><a href="/posts/dca9f245/" title="Serv00 搭建网站监控 Uptime-Kuma"><img class="cover" src="https://serv.200038.xyz/2024/09/18/623949.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-08-02</div><div class="title">Serv00 搭建网站监控 Uptime-Kuma</div></div></a></div><div><a href="/posts/a4cbd32a/" title="Serv00最简单的哪吒搭建方式"><img class="cover" src="https://serv.200038.xyz/2024/09/16/825387.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-26</div><div class="title">Serv00最简单的哪吒搭建方式</div></div></a></div><div><a href="/posts/7c9edd9/" title="Serv00登录保活"><img class="cover" src="https://serv.200038.xyz/2024/09/19/041677.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-23</div><div class="title">Serv00登录保活</div></div></a></div><div><a href="/posts/b188bc1/" title="Serv00搭建影视站"><img class="cover" src="https://serv.200038.xyz/2024/09/19/932079.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-18</div><div class="title">Serv00搭建影视站</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display: none">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="/img/chuibaoni.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"><div class="author-status"><img class="g-status" src="https://bu.dusays.com/2021/01/15/554aebb694bc4.png" alt="status"></div></div><div class="author-info__description">我是一位正在努力学习的小白。感谢你的到访，希望这里可以有你需要的东西</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">东方月初</h1><div class="author-info__desc">涂山红红</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/damizai" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/294669683" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是东方月初，欢迎来到我的小站😀！</span><br> <span>❓ 如有问题欢迎评论区交流！</span><br> <span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br> <span>📧 如需联系我：<a href="mailto:jinxcose@gmail.com"><b>发送邮件🚀</b></a></span> <div id="welcome-info"></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Serv00%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAPixPro%E5%9B%BE%E5%BA%8A-%E5%86%85%E5%AD%98%E5%A4%AA%E5%B0%8F-%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E6%8E%A5%E5%85%A5%E5%88%B0CFR2-%E8%B6%B3%E5%A4%9F%E4%B8%AA%E4%BA%BA%E4%BD%BF%E7%94%A8%E3%80%82%E8%87%AA%E5%B7%B1%E6%9C%89VPS%E7%9A%84%E4%B9%9F%E5%8F%AF%E5%9C%A8%E5%AE%9D%E5%A1%94%E4%B8%8A%E9%9D%A2%E9%83%A8%E7%BD%B2"><span class="toc-text">Serv00上搭建一个PixPro图床,内存太小,我们可以接入到CFR2 足够个人使用。自己有VPS的也可在宝塔上面部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E6%9D%BF%E9%A1%B5"><span class="toc-text">面板页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E9%A1%B5"><span class="toc-text">后台页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Serv00%E5%9B%BE%E5%BA%8A-PNG%E4%B8%8A%E4%BC%A0%E7%A9%BA%E7%99%BD-%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-%E5%A4%8D%E5%88%B6%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81-%E6%9B%BF%E6%8D%A2%E5%88%B0-config-image-processing-php"><span class="toc-text">Serv00图床 PNG上传空白 解决办法  复制以下代码 替换到 config/image_processing.php</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9F%E5%8F%AF%E4%B8%8B%E8%BD%BD-PixPin-%E6%88%AA%E5%9B%BE%E8%BD%AF%E4%BB%B6%E8%AF%95%E8%AF%95"><span class="toc-text">也可下载 PixPin  截图软件试试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87"><span class="toc-text">安装前准备</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4"><span class="toc-text">安装步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%8C%E4%B8%8A%E4%B8%80%E6%AD%A5%E4%B8%80%E6%A0%B7"><span class="toc-text">和上一步一样</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5R2-%E5%89%8D%E6%8F%90-%E5%B7%B2%E5%BC%80%E9%80%9A-Cloudflare-R2"><span class="toc-text">接入R2 前提 已开通 Cloudflare R2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5%E5%88%B0-Cloudflare-%E9%9D%A2%E6%9D%BF-%E6%89%BE%E5%88%B0-R2-%E5%8F%B3%E8%BE%B9%E6%9C%89%E4%B8%80%E4%B8%AA%E7%AE%A1%E7%90%86-R2API-%E4%BB%A4%E7%89%8C%E7%82%B9%E5%87%BB%E5%88%9B%E5%BB%BA-API%E4%BB%A4%E7%89%8C-%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%A5%BD%E5%90%8E%E9%87%8C%E9%9D%A2%E6%9C%89%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E7%9A%84%E8%AE%BF%E9%97%AE%E5%AF%86%E9%92%A5%E5%92%8C%E6%9C%BA%E5%AF%86%E8%AE%BF%E9%97%AE%E5%AF%86%E9%92%A5"><span class="toc-text">进入到 Cloudflare 面板 找到 R2 右边有一个管理 R2API 令牌点击创建 API令牌 ，创建好后里面有我们需要的访问密钥和机密访问密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BF%9B%E5%85%A5%E5%88%B0-Cloudflare-%E9%9D%A2%E6%9D%BF-%E6%89%BE%E5%88%B0-R2-%E7%82%B9%E5%87%BB%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E6%A1%B6"><span class="toc-text">1. 进入到 Cloudflare 面板 找到 R2 点击创建存储桶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%9B%E5%85%A5%E5%90%8E%E5%90%8D%E7%A7%B0%E9%9A%8F%E4%BE%BF%E5%86%99%E3%80%82%E4%BD%8D%E7%BD%AE%E9%80%89%E6%8B%A9%E4%BA%9A%E5%A4%AA%E5%9C%B0%E5%8C%BA%E5%90%8E%E7%82%B9%E5%87%BB%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E6%A1%B6"><span class="toc-text">2. 进入后名称随便写。位置选择亚太地区后点击创建存储桶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E5%A5%BD%E5%90%8E%E7%82%B9%E5%87%BB%E8%AE%BE%E7%BD%AE%E6%8B%89%E5%88%B0%E4%B8%8B%E9%9D%A2%E7%9C%8B%E5%88%B0-R2-dev-%E5%AD%90%E5%9F%9F%E7%82%B9%E5%87%BB%E5%90%8E%E9%9D%A2%E7%9A%84%E5%85%81%E8%AE%B8%E8%AE%BF%E9%97%AE-%EF%BC%8C-%E8%BF%9E%E6%8E%A5%E5%9F%9F%E9%9C%80%E8%A6%81%E6%B7%BB%E5%8A%A0%E4%BD%A0%E6%89%98%E7%AE%A1%E5%88%B0CF%E4%B8%8A%E9%9D%A2%E5%9F%9F%E5%90%8D"><span class="toc-text">3. 创建好后点击设置拉到下面看到 R2.dev 子域点击后面的允许访问 ， 连接域需要添加你托管到CF上面域名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-14-%E6%AD%A5%E6%88%91%E4%BB%AC%E5%AE%89%E8%A3%85%E9%80%89%E6%8B%A9S3%E5%90%8E%E7%9C%8B%E5%88%B0%E4%B8%8B%E5%9B%BE"><span class="toc-text">4. 14 步我们安装选择S3后看到下图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90%E5%AE%89%E8%A3%85%E5%8D%B3%E5%8F%AF%E3%80%82%E8%BF%99%E6%98%AF%E6%88%91%E4%BB%AC%E4%B8%8A%E4%BC%A0%E5%A5%BD%E7%9A%84%E5%9B%BE%E7%89%87-%E6%88%91%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%9F%9F%E5%90%8D%E5%B0%B1%E6%98%AF%E6%88%91%E4%BB%AC-R2-%E5%88%86%E9%85%8D%E7%9A%84%E5%9F%9F%E5%90%8D"><span class="toc-text">5. 点击完成安装即可。这是我们上传好的图片 我下面的域名就是我们 R2 分配的域名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%88%91%E4%BB%AC%E5%9B%9E%E5%88%B0-Cloudflare-R2-%E5%B0%B1%E4%BC%9A%E7%9C%8B%E5%88%B0%E5%88%9A%E5%88%9A%E4%B8%8A%E4%BC%A0%E7%9A%84%E5%9B%BE%E7%89%87"><span class="toc-text">6. 我们回到 Cloudflare R2 就会看到刚刚上传的图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2%E4%BD%9C%E8%80%85%E6%A2%A6%E7%88%B1%E5%90%83%E9%B1%BC%EF%BC%8C%E6%AC%A2%E8%BF%8E%E5%A4%A7%E5%AE%B6%E5%8E%BB%E9%A2%84%E8%A7%88%E3%80%81%E5%93%88%E5%93%88%E5%93%88"><span class="toc-text">感谢作者梦爱吃鱼，欢迎大家去预览、哈哈哈</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/688a2073/" title="使用带有PHP的主机 + Cloudflare + Worker 搭建一个Umami API"><img src="https://serv.200038.xyz/2024/10/29/089211.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="使用带有PHP的主机 + Cloudflare + Worker 搭建一个Umami API"></a><div class="content"><a class="title" href="/posts/688a2073/" title="使用带有PHP的主机 + Cloudflare + Worker 搭建一个Umami API">使用带有PHP的主机 + Cloudflare + Worker 搭建一个Umami API</a><time datetime="2024-10-30T04:39:27.000Z" title="发表于 2024-10-30 12:39:27">2024-10-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a0d553fe/" title="使用 FastyCDN 加速 Cloudflare部署的博客项目"><img src="https://serv.200038.xyz/2024/09/19/993800.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="使用 FastyCDN 加速 Cloudflare部署的博客项目"></a><div class="content"><a class="title" href="/posts/a0d553fe/" title="使用 FastyCDN 加速 Cloudflare部署的博客项目">使用 FastyCDN 加速 Cloudflare部署的博客项目</a><time datetime="2024-10-13T14:28:16.000Z" title="发表于 2024-10-13 22:28:16">2024-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/be15b3cd/" title="基于IP地址的真实地址生成器"><img src="https://serv.200038.xyz/2024/10/12/850208.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="基于IP地址的真实地址生成器"></a><div class="content"><a class="title" href="/posts/be15b3cd/" title="基于IP地址的真实地址生成器">基于IP地址的真实地址生成器</a><time datetime="2024-10-10T13:32:46.000Z" title="发表于 2024-10-10 21:32:46">2024-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/9010447f/" title="anzhiyu 主题 留言板页添加全屏弹幕"><img src="https://serv.200038.xyz/2024/09/29/316116.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="anzhiyu 主题 留言板页添加全屏弹幕"></a><div class="content"><a class="title" href="/posts/9010447f/" title="anzhiyu 主题 留言板页添加全屏弹幕">anzhiyu 主题 留言板页添加全屏弹幕</a><time datetime="2024-09-29T09:30:57.000Z" title="发表于 2024-09-29 17:30:57">2024-09-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/89d112a2/" title="Serv00搭建Alist个人网盘"><img src="https://serv.200038.xyz/2024/09/19/857815.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/niceao/img/2024/09/19/688230.webp'" alt="Serv00搭建Alist个人网盘"></a><div class="content"><a class="title" href="/posts/89d112a2/" title="Serv00搭建Alist个人网盘">Serv00搭建Alist个人网盘</a><time datetime="2024-09-22T15:17:13.000Z" title="发表于 2024-09-22 23:17:13">2024-09-22</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="/weilai2028@gmail.com" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/1937092692" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src="/img/chuibaoni.gif" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/damizai" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/294669683" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com/iMREVjAE/ 9@4.com :9pm" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src="https://img.shields.io/badge/jin_x-you_like-blue" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">SSH工具</div><div class="footer-links"><a class="footer-item" title="FINSHELL" target="_blank" rel="noopener" href="https://www.hostbuf.com/t/988.html">FINSHELL</a><a class="footer-item" title="XSHELL" target="_blank" rel="noopener" href="https://www.xshell.com/zh/free-for-home-school/">XSHELL</a><a class="footer-item" title="electerm" target="_blank" rel="noopener" href="https://electerm.html5beta.com/">electerm</a></div></div><div class="footer-group"><div class="footer-title">域名申请</div><div class="footer-links"><a class="footer-item" title="Spaceship" target="_blank" rel="noopener" href="https://www.spaceship.com/">Spaceship</a><a class="footer-item" title="Namesilo" target="_blank" rel="noopener" href="https://www.namesilo.com/">Namesilo</a><a class="footer-item" title="US.kg" target="_blank" rel="noopener" href="https://register.us.kg/">US.kg</a></div></div><div class="footer-group"><div class="footer-title">VPS</div><div class="footer-links"><a class="footer-item" title="VMshell" target="_blank" rel="noopener" href="https://vmshell.com/cart.php?a=confproduct&amp;i=0">VMshell</a><a class="footer-item" title="AC云" target="_blank" rel="noopener" href="https://www.anyfastcloud.com/">AC云</a><a class="footer-item" title="ColoCrossing" target="_blank" rel="noopener" href="https://cloud.colocrossing.com/cart.php?a=confproduct&amp;i=1">ColoCrossing</a></div></div><div class="footer-group"><div class="footer-title">监控项目</div><div class="footer-links"><a class="footer-item" title="CF-workers-status-page" target="_blank" rel="noopener" href="https://github.com/eidam/cf-workers-status-page">CF-workers-status-page</a><a class="footer-item" title="UptimeFlare" target="_blank" rel="noopener" href="https://github.com/lyc8503/UptimeFlare">UptimeFlare</a><a class="footer-item" title="uptime-kuma" target="_blank" rel="noopener" href="https://github.com/kakluo/uptime-kuma">uptime-kuma</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"></a><a class="github-badge" target="_blank" href="https://blog.damizai.cn/" style="margin-inline:5px" data-title="本站使用Cloudflare为静态资源提供CDN加速" title="本站使用Cloudflare为静态资源提供CDN加速"><img src="https://img.shields.io/badge/%E2%98%81%EF%B8%8FCDN-Cloudflare-f4822f" alt="本站使用Cloudflare为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="https://fastly.hexo.200038.xyz/" style="margin-inline:5px" data-title="本站使用Fastly为静态资源提供CDN加速" title="本站使用Fastly为静态资源提供CDN加速"><img src="https://img.shields.io/badge/%E2%98%81%EF%B8%8FCDN-Fastly-e87041" alt="本站使用Fastly为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">©2024 By <a class="footer-bar-link" href="/" title="东方月初" target="_blank">东方月初</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://icp.gov.moe/?keyword=20249080" title="萌ICP备-20249080号">萌ICP备-20249080号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">26</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">54</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/statistics/"><i class="fa-solid fa-chart-line faa-tada"></i><span> 文章统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://suoni.nyc.mn/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链状态检测</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/websites/"><i class="anzhiyufont anzhiyu-icon-fire faa-tada" style="font-size: 0.9em;"></i><span> 网站收藏</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://200038.xyz"><i class="anzhiyufont anzhiyu-icon-anzhiyu faa-tada" style="font-size: 0.9em;"></i><span> 个人主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="anzhiyufont anzhiyu-icon-bolt faa-tada" style="font-size: 0.9em;"></i><span> 本站日志</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Cloudflare-pages/" style="font-size: 0.88rem;">Cloudflare pages<sup>7</sup></a><a href="/tags/D1-R2/" style="font-size: 0.88rem;">D1 + R2<sup>1</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/GitHub/" style="font-size: 0.88rem;">GitHub<sup>1</sup></a><a href="/tags/Github/" style="font-size: 0.88rem;">Github<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>8</sup></a><a href="/tags/LOL/" style="font-size: 0.88rem;">LOL<sup>1</sup></a><a href="/tags/Markdown/" style="font-size: 0.88rem;">Markdown<sup>1</sup></a><a href="/tags/Noge-js/" style="font-size: 0.88rem;">Noge.js<sup>1</sup></a><a href="/tags/Rin/" style="font-size: 0.88rem;">Rin<sup>1</sup></a><a href="/tags/Serv00/" style="font-size: 0.88rem;">Serv00<sup>7</sup></a><a href="/tags/Vercel/" style="font-size: 0.88rem;">Vercel<sup>1</sup></a><a href="/tags/npm%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">npm命令<sup>1</sup></a><a href="/tags/wrok/" style="font-size: 0.88rem;">wrok<sup>1</sup></a><a href="/tags/%E4%B8%8D%E5%A4%AA%E5%85%A8/" style="font-size: 0.88rem;">不太全<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" style="font-size: 0.88rem;">个人博客<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 0.88rem;">博客<sup>1</sup></a><a href="/tags/%E5%9B%BE%E5%BA%8A/" style="font-size: 0.88rem;">图床<sup>2</sup></a><a href="/tags/%E5%A5%BD%E7%9C%8B%E7%9A%84/" style="font-size: 0.88rem;">好看的<sup>1</sup></a><a href="/tags/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/" style="font-size: 0.88rem;">静态网站<sup>1</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.8"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async="" src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("07/05/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 东方月初 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async="" src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("07/05/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://img.shields.io/badge/jin_x-you_like-blue";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://weilai.us.kg',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://weilai.us.kg',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async="" src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://weilai.us.kg',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async="" data-pjax="" src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script async="" data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="/static/dongwu.js"></script><script src="https://lib.baomitu.com/echarts/4.9.0-rc.1/echarts.min.js"></script><script defer="" src="https://um.200038.xyz/script.js" data-website-id="e1de29e4-9232-4cac-aa89-49a228d5b47e"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><script>//- 留言板页面弹幕
window.addEventListener('load', () => {
  const getnaokuo_danmu = () => {
    if (!window.location.pathname.startsWith('/comments/')) return; //- 判断是否是留言板页面
    const naokuo_danmu = async () => {
      const Danmaku = new EasyDanmaku({
        page: '/comments/', //- 即留言板地址
        el: '#danmu-wrap', //- 弹幕挂载节点
        line: 6, //- 弹幕行数
        speed: 20, //- 弹幕播放速度
        hover: true, //- 鼠标hover时是否暂停播放弹幕
        loop: false, //- 开启循环播放
        colourful: true, //- 开启彩色弹幕
        coefficient: 1.38, //- 弹幕密度系数
        runtime: 10, //- 循环弹幕播放时长
      });
      try {
        let danmuStore = saveToLocal.get('twikoo-danmu');
        if (!danmuStore) {
          const options = {
            method: "POST",
            body: JSON.stringify({
              "event": "GET_RECENT_COMMENTS",
              "includeReply": false,
              "pageSize": 100
            }),
            headers: { 'Content-Type': 'application/json' }
          }
          danmuStore = [];
          const response = await fetch(`https://weilai.us.kg`, options);
          if (response.ok) {
            const { data } = await response.json();
            //- console.info(data);
            data.forEach(i => {
              if (i.avatar == undefined) i.avatar = 'https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp'
              danmuStore.push({ avatar: i.avatar, content: i.nick + '：' + formatDanmaku(i.comment), url: i.url + '#' + i.id })
            });
            Danmaku.batchSend(danmuStore, true);
            saveToLocal.set('twikoo-danmu', danmuStore, 0.5)
          }
          //- 格式化评论
          function formatDanmaku(str) {
            str = str.replace(/<\/*br>|[\s\uFEFF\xA0]+/g, '');
            str = str.replace(/<img.*?>/g, '[图片]');
            str = str.replace(/<a.*?>.*?<\/a>/g, '[链接]');
            str = str.replace(/<pre.*?>.*?<\/pre>/g, '[代码块]');
            str = str.replace(/<.*?>/g, '');
            return str
          }
        } else {
          Danmaku.batchSend(danmuStore, true);
        }
      } catch (err) {
        console.error("Error fetching data:", err);
      }

      document.getElementById('danmu-Btn') && (document.getElementById('danmu-Btn').innerHTML = `<button class="hide-Btn" onclick="document.getElementById('danmu-wrap').classList.remove('hide-danmu')">显示弹幕</button> <button class="hide-Btn" onclick="document.getElementById('danmu-wrap').classList.add('hide-danmu')">隐藏弹幕</button>`)
    }
    (async () => {
      if (typeof EasyDanmaku === 'function') {
        await naokuo_danmu();
      } else {
        const easyDanmakuScript = await getScript('https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js');
        if (typeof EasyDanmaku === 'function') {
          await naokuo_danmu();
        } else {
          console.error('EasyDanmaku function not found even after loading the script.');
        }
      }
    })();
  }
  getnaokuo_danmu()
  document.addEventListener('pjax:complete', getnaokuo_danmu)
})</script><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>